{% extends "base.html" %}
{% load static wagtailcore_tags wagtailimages_tags %}

{% block extra_css %}
    <link rel="stylesheet" type="text/css" href="{% static 'home/css/home_page.css' %}">
{% endblock %}

{% block body_class %}template-homepage{% endblock %}

{% block extra_includes %}
    <div id="slider-wrapper">
        <div id="inner-slider-wrapper1">
            <div id="mainCarousel" class="carousel slide" data-bs-ride="carousel">
                <div class="carousel-indicators">
                    {% for slide in page.event_slides.all %}
                        {% if forloop.first %}
                            <button type="button" data-bs-target="#mainCarousel" data-bs-slide-to="0"
                                    class="active" aria-current="true" aria-label="Slide 1"></button>
                        {% else %}
                            <button type="button" data-bs-target="#mainCarousel"
                                    data-bs-slide-to="{{ forloop.counter|add:"-1" }}"
                                    aria-label="Slide {{ forloop.counter }}"></button>
                        {% endif %}
                    {% endfor %}
                </div>
                <div class="carousel-inner slides">
                    {% include 'home/includes/eventslides.html' with slides=page.event_slides.all %}
                </div>
                <button class="carousel-control-prev" type="button" data-bs-target="#mainCarousel"
                        data-bs-slide="prev">
                    <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                    <span class="visually-hidden">Previous</span>
                </button>
                <button class="carousel-control-next" type="button" data-bs-target="#mainCarousel"
                        data-bs-slide="next">
                    <span class="carousel-control-next-icon" aria-hidden="true"></span>
                    <span class="visually-hidden">Next</span>
                </button>
            </div>
        </div>
        <!-- Begin Inner Info Div -->

        <div id="rbginfobg container-fluid">
            <div id="rbginfo" class="row">

                <div id="rbghours" class="col">
                    <a href="{% slugurl 'general-info' %}" aria-label="General Information Page">
                        <div class="rbghours hover"></div>
                    </a>
                    <div id="gardenHours"></div>
                    <div id="gardenStatus"></div>
                    <div id="gardenEmphatic" class="red text-center"></div>
                    <div id="otherNotes"></div>
                </div>

                <div class="col" onmouseenter="admissionHoverOn()">
                    <a href="{% slugurl 'general-info' %}" aria-label="General Information Page">
                        <div id="rbgadmission" class="rbgadmission hover"></div>
                    </a>
                </div>
                <div id="rbgdirections" class="col">
                    <a href="{% slugurl 'directions' %}" aria-label="How to get to the garden">
                        <div class="rbgdirections hover"></div>
                    </a>
                </div>
                <div id="rbgweather" class="col">
                    <a href="https://www.weatherbug.com/weather-camera/?cam=SLTWK" target="_blank"
                       aria-label="External link to weatherbug weather station with camera">
                        <div class="rbgweather hover"></div>
                    </a>
                </div>

                <!-- Begin Page Down Code for Slides on Mobile -->
                <div id="page-down" class="row">
                    <span class="page-down-icon">
                        <picture>
                            <source srcset="{% static 'home/img/down-arrow.webp' %}" type="image/webp">
                            <img alt="downward-arrow" src="{% static 'home/img/down-arrow.png' %}" width="75em"
                                 height="25em"/>
                        </picture>
                    </span>
                </div>
                <!-- End Page Down Code for Slides on Mobile -->
            </div>
        </div>
    </div>
    <!-- End Inner Info Div-->

    <!-- Dump the RBG Hours snippit info for our hours.js script to consume -->
    <div id="rbg_hours_info" style="display: none;">
        <div id="hours_override">{{ page.hours.allow_override }}</div>
        <div id="hours_man_open">{{ page.hours.garden_open|date:"g:i A" }}</div>
        <div id="hours_man_close">{{ page.hours.garden_close|date:"g:i A" }}</div>
        <!-- used default_if_none filter to prevent None from appearing literally if message not set -->
        <div id="hours_man_add_msg">{{ page.hours.additional_message|default_if_none:"" }}</div>
        <div id="hours_man_add_emph_msg">{{ page.hours.additional_emphatic_mesg|default_if_none:"" }}</div>
        <div id="hours_holiday_day">{{ page.hours.holiday_party_close_time.day }}</div>
        <div id="hours_holiday_hour">{{ page.hours.holiday_party_close_time.hour }}</div>
        <div id="hours_holiday_minute">{{ page.hours.holiday_party_close_time.minute }}</div>
        <div id="hours_gad_start">{{ page.hours.gad_start }}</div>
        <div id="hours_gad_end">{{ page.hours.gad_end }}</div>
    </div>
{% endblock %}

{% block abnormal_content %}
    <div id="rbghomebody" class="container-fluid">
        <div class="row">
            <div class="col-sm-12">
                <br/>

                <div>
                    <hr class="hr-separator">
                    <div class="separator">MEDIA</div>
                </div>

                <div class="row-fluid">
                    <div class="col-sm-6">
                        <a href="{% slugurl 'whats-blooming-now' %}">
                            <picture>
                                <source srcset="{% static 'home/img/blog1.webp' %}" type="image/webp">
                                <img alt="Text says whats blooming over picture of several purple irises" class="hover"
                                     src="{% static 'home/img/blog1.jpg' %}" width="588em" height="332em">
                            </picture>
                        </a>
                    </div>
                    {# Social media page is the only non watail page. It's served from a view in the home app #}
                    <div class="col-sm-6">
                        <a href="/social-media">
                            <picture>
                                <source srcset="{% static 'home/img/socialMedia-small.webp' %}" type="image/webp">
                                <img alt="hand holding smartphone" class="hover"
                                     src="{% static 'home/img/socialMedia-small.png' %}" width="588em" height="332em">
                            </picture>
                        </a>
                    </div>
                </div>

                <br/>
                <br/>
                <br/>

                <div>
                    <hr class="hr-separator">
                    <div class="separator">EVENTS</div>
                </div>

                <br/>

                <div class="row-fluid">
                    <div class="col-sm-12">
                        <a href="{% slugurl 'calendar' %}">
                            <picture>
                                <source srcset="{% static 'home/img/whats-happening.webp' %}" type="image/webp">
                                <img alt="text says whats happening over picture of red butte garden amphitheater"
                                     class="hover" src="{% static 'home/img/whats-happening.jpg' %}" width="1280em"
                                     height="325em">
                            </picture>
                        </a>
                    </div>
                </div>

                <br/>
                <br/>
                <br/>


                <br/>
            </div>
        </div>
    </div>
{% endblock abnormal_content %}

{% block extra_js %}
    <script src="{% static 'home/js/hours.js' %}"></script>
    <script src="{% static 'home/js/admission-hover.js' %}"></script>
    {% include 'home/includes/page-down.html' %}
{% endblock %}
